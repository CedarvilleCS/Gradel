{% extends 'base.html.twig' %}

{% block head %}

{% endblock %}


{% block body %}
	<div class="topnav" id="myTopnav">
	  <a>Home</a>
	  <a>Account</a>
	</div>

  <table>
    <tr>
      <th>Course</th>
      <th>
        <select id="section">
          {% for section in sections %}
            <option  value="{{section.id}}">{{section.name}}</option>
          {% endfor %}
        </select>
      </th>
    </tr>
    <tr>
      <th>Name</th>
      <th>
        <input id="name" value=""></input>
      </th>
    </tr>
    <tr>
      <th>Semester</th>
      <th>
        <select id="semester">
          <option>Fall</option>
          <option>Spring</option>
        </select>
      </th>
    </tr>
    <tr>
      <th>Year</th>
      <th>
        <select id="year">
          <option>2017</option>
          <option>2018</option>
        </select>
    </tr>


    <tr>
      <th colspan="2">
        <button>add</button>
      </th>
    </tr>
  </table>

  <!-- {{form_start(form)}}
  {{form_widget(form)}}
  {{form_end(form)}} -->

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script>
		$(document).ready(function() {
		  $('button').on('click', function(){insertSection();});
		});

		function insertSection() {
		  console.log("Ajaxing in to the insert section function");
		  const test = document.getElementById("section");
			const name = document.getElementById("name").value;
			const semester = document.getElementById("semester").value;
			const year = document.getElementById("year").value;
			// const start_time = document.getElementById("start_time").value;
			// const end_time = document.getElementById("end_time").value;
			// const is_deleted = document.getElementById("is_deleted").value;
			// const is_public = document.getElementById("is_public").value;
		  const id = test[test.selectedIndex].value;
		  console.log("KAHHHHHNNNNN");
// path: '/account/{userId}/section/insert/{courseId}/{name}/{semester}/{year}/{start_time}/{end_time}/{is_deleted}/{is_public}
			var path = "{{path('section_insert', {"courseId": 'course_id', "userId": userId, 'semester': 'semester', 'year': 'year', 'start_time': 'start_time', 'end_time': 'end_time', 'is_deleted': 'is_deleted', 'is_public': 'is_public' })|escape('js')}}";
			path = path.replace("course_id", id);
			console.log(path);
		  $.post(path,
		    function(response) {
		      console.log(response);
		      if (response.code === 100 ) {
		        console.log(response);
		      }
		    },
		    "json");
		}

		// console.log("EMILY");
		// const test = document.getElementById("section");
		// console.log(test[test.selectedIndex].value);
		// const route = "{{path('section_insert', {"courseId": id, "userId": userId })|escape('js')}}"; // TODO: Replace static 1
		// console.log(route);
	</script>

  <script src="{{ asset('js/newSection.js') }}"></script>
{% endblock %}

{% block stylesheets %}
<style>
		@import url(https://fonts.googleapis.com/css?family=Roboto:300);

		table {
		    font-family: arial, sans-serif;
		    border-collapse: collapse;
				margin: 0 auto;
				margin-top: 50px;
		    min-width: 350px;
				max-width: 550px;
		}

		td, th {
		    border: 1px solid #dddddd;
		    text-align: left;
		    padding: 8px;
		}

		tr:nth-child(even) {
		    background-color: #dddddd;
		}

		.topnav {
    background-color: #333;
    overflow: hidden;
		}

		/* Style the links inside the navigation bar */
		.topnav a {
		    float: left;
		    display: block;
		    color: #f2f2f2;
		    text-align: center;
		    padding: 14px 16px;
		    text-decoration: none;
		    font-size: 17px;
		}

		/* Change the color of links on hover */
		.topnav a:hover {
		    background-color: #ddd;
		    color: black;
		}

		/* Add a color to the active/current link */
		.topnav a.active {
		    background-color: #4CAF50;
		    color: white;
		}

		h1 {
			font-family: "Robot", sans-serif;
			font-size: 16px;
		}

		body {
		margin: 0px;
	  background: #ffffff; /* fallback for old browsers */
	  background: -webkit-linear-gradient(right, #f2f2f2, #ffffff);
	  background: -moz-linear-gradient(right, #f2f2f2, #ffffff);
	  background: -o-linear-gradient(right, #f2f2f2, #ffffff);
	  background: linear-gradient(to left, #f2f2f2, #ffffff);
	  font-family: "Roboto", sans-serif;
	  -webkit-font-smoothing: antialiased;
	  -moz-osx-font-smoothing: grayscale;
	  }
</style>
{% endblock %}
