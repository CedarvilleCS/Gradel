

{% extends 'base.html.twig' %}

{% block title %}
	Submission {{submission.id}} Result
{% endblock %}

{% block body %}

{% if grader is not defined %}

The grader was not passed from the controller.

{% else %}

{% set grades = grader.getProblemGrade(app.user, problem) %}

<body>
	{{ include('template/top-nav.html.twig') }}
	
	{# left panel with the problem links #}
	{{ include('template/problem-nav.html.twig') }}
	
	<section id="main">

		{{ include('template/path-nav.html.twig') }}
	
		<div class="card">
			<h2 style="margin: 0px">{{submission.problem.name}}</h2>
				<div id="courseInfo" class="card-contents">
				<h2>SUBMISSION ID: {{submission.id}}</h2>
				<h3>RESULT: 
					{% if submission.isCorrect %}
						
						<span style="color:green">CORRECT!</span>
						
					{% else %}
					
						<span style="color:red">
						{% if submission.compiler_error %}
						COMPILER ERROR!
						{% elseif submission.exceeded_time_limit %}
						TIME LIMIT EXCEEEDED!
						<br/>
						
						{% if submission.testcaseresults|length > 0 %}
							{% for tcr in submission.testcaseresults %}
								Runtime for input {{tcr.testcase.seq_num}}) {{tcr.execution_time/1000}}s
								<br/>
							{% endfor %}
						{% else %}
							Wall clock limit exceeded <br/>
						{% endif %}
						
						{% elseif submission.runtime_error %}
						RUNTIME ERROR!
						{% else %}
						WRONG ANSWER!
						{% endif %}
						</span>
					{% endif %}
				</h3>
				
				<h3> TESTCASES: 
				{% for tcr in submission.testcaseresults %}
				
					{% if tcr.testcase.is_extra_credit %}
						{% set var1='lightgreen' %}
						{% set var2='pink' %}
					{% else %}
						{% set var1='green' %}
						{% set var2='red' %}
					{% endif %}
				
					{% if tcr.is_correct %}
						<span style="color:{{var1}}; font-size: 20px"> &#x2713; </span> 				
					{% else %}
						<span style="color:{{var2}}; font-size: 20px"> &#x2718</span>
					{% endif %}
				
				{% endfor %}
				</h3>

				<div id="status">
				{% if submission.questionable_behavior %}
					POSSIBLE MALICIOUS BEHAVIOR DETECTED
				{% endif %}
				
				{% if submission.compiler_error %}
					<h2> COMPILER OUTPUT </h2>
					<hr>
					{{compiler_output}}			
					<hr>
				{% elseif submission.runtime_error %}
					<h2> RUNTIME OUTPUT </h2>
					<hr>
					{% for tc in testcases_output %}
						{{tc.runtime_output}}<br/>			
						<hr>			
					{% endfor %}
				{% endif %}
				
				{% if submission_file != "" %}	
						<h3> SUBMITTED CODE </h3>
						<h4> {{submission.filename}} </h4>
						<hr>
<div id="editor">{{submission_file|nl2br}}</div>
						<hr>
				{% endif %}
			</div>
		</div>
	
	</section>
	
	</body>
	
{% endif %}
	
{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" href="{{ asset('styles.css') }}" />
<link rel="stylesheet" href="{{ asset('submit.css') }}" />

{% endblock %}

{% block javascripts %}
    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script src="{{ asset('src-noconflict/ace.js') }}" type="text/javascript" charset="utf-8"></script>

	<script>
		var editor = ace.edit("editor");
		editor.setTheme("ace/theme/xcode");
	</script>

{% endblock %}