{# make sure that the grader entity is define before doing all of this stuff #}
{% if grades is defined and section is defined and assignments is defined and section_teachers is defined %}

<nav class="nav-left">
	{% if is_granted("ROLE_ADMIN") or is_granted("ROLE_SUPER") %}
		<a href="{{path('assignment_new', {"sectionId": section.id})}}" class="btn"><div class="btn btn-center">+ Assignment</div></a>
	{% endif %}
	
	{% if assignments|length == 0 %}
		<ol>
			<li> No Assignments Found </li>
		</ol>			
	
	{% else %}
		<ol style="padding-bottom: 10px">
			{% for assig in assignments %}
		
				<a href={{path('assignment', {'sectionId': assig.section.id, "assignmentId": assig.id})}}>
				<li>
					<span class="preview">
						{{ assig.name }}
						<br>
						<small>
							{{assig.end_time|date('F d, Y')}}
							{% if app.user in section_takers %}
								<br/>{{grades[app.user.id][assig.id]['num_correct_problems']}}/{{grades[app.user.id][assig.id]['num_problems']}} - {{(grades[app.user.id][assig.id]['percentage_adj']*100)|number_format(1,'.')}}%
							{% endif %}
						</small>
					</span>
	
				{% if app.user in section_teachers or is_granted("ROLE_SUPER") %}
					<object><a title="Edit assignment" id="edit-icon" href="{{path('assignment_edit', {'sectionId': assig.section.id, 'assignmentId': assig.id})}}">
					<svg xmlns="http://www.w3.org/2000/svg" fill="#ffffff" height="15" viewBox="0 0 24 24" width="15">
					<path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
					<path d="M0 0h24v24H0z"  fill="none"/>
					</svg>
					</a></object>
				{% endif %}	
				
				</li>
				</a>
				
			{% endfor %}
		</ol>	
	{% endif %}
</nav>

{% endif %}